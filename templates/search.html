{% extends 'main.html' %}
{% block title %} {{query}} - {{location}} {% endblock %}
{% block content %}

  <a href="{{url_for('show_catalog')}}"> MAIN </a>
  <h1> Displaying results for {{query}} in/near {{location}} </h1>

  {% for venue in data %}
    {% if venue != 'LIMIT' %}
      <div class='venues'>
        <div class='images'>
          {% if venue['image'] %}
            <img src="{{venue['image']}}">
          {% else %}
            <img src="{{url_for('static', filename='img/placeholder.png')}}"
                                               alt='Placeholder Image'>
          {% endif %}
        </div>
        <h2 class='names'> {{venue['name']}} </h2>
        {% if venue['address'] %}
          <pre class='addresses'> {{venue['address']}} </pre>
        {% endif %}
        {% if venue['phone'] %}
          <pre class='phones'> {{venue['phone']}} </pre>
        {% endif %}
        {% if venue['description'] %}
          <p class='description'> {{venue['description']}} </p>
        {% endif %}
        </div>
      </div>

      {% if session.user_key %}
        {% if not venue['in_db'] %}
          <form action="{{url_for('add_venue', venue=venue)}}" method='POST'>
            <button id="{{'venue-num'~loop.index|string}}" class='save-btn'
                    name='venue' value='{{venue|tojson}}'>
              SAVE
            </button>
          </form>
        {% else %}
          <p>SAVED!</p>
        {% endif %}
      {% endif %}

    {% endif %}
  {% endfor %}

  <br><br><br><br><br>

  {% if offset|int != 0 %}
    <a class='next' href="{{url_for('search', query=query, location=location,
              offset=offset|int-10)}}"> PREVIOUS </a>
  {% endif %}
  {% if data[LIMIT-1] %}
    <a class='next' href="{{url_for('search', query=query, location=location,
              offset=offset|int+10)}}"> NEXT </a>
  {% endif %}

{% endblock %}
